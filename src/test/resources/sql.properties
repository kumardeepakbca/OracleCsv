app.query.init.session= alter session set current_schema=crelscm_owner
app.query.alter.date.session= alter session set nls_date_format = 'MM/DD/YYYY HH24:MI:SS'
app.query=select  cast (la.filoanid as integer) as LOAN_NUM,LA.WORKFLOWSTATECODE workflow,TO_CHAR(LA.CREATEDATE,'MM/dd/yyyy HH24:MI:SS') RFP_dt, TO_CHAR(LA.APPLICATIONRECEIVEDDATE,'MM/dd/yyyy HH24:MI:SS') app_dt, cast (LPS.MARKETTYPE as integer) as MARKETTYPE, ALO2.CPIKEY, TO_CHAR(LPS.BASERATEDATE,'MM/dd/yyyy HH24:MI:SS') BASERATEDATE, LP.ACTIONTAKEN, TO_CHAR(LP.ACTIONDATE,'MM/dd/yyyy HH24:MI:SS') ACTIONDATE, TO_CHAR(LP.LOCKDATE,'MM/dd/yyyy HH24:MI:SS') LOCKDATE, LA.LOANAMOUNT, LPS.LOANTERM, LP.LTV, LP.CLTV, LP.ACLTV, LA.FICOSCORE, LPS.RATE, LPS.POINTS, LPS.LOCKPERIODDAYS, LPS.LOCKSTATUS, LP.AGENCY, LPS.PROGRAMDESC, FNMA.DESCRIPTION Prop_type,  rt.description OCCUPANCY, AD.STATECODE,(SELECT LT.DESCRIPTION FROM T_loantype lt WHERE LT.LOANTYPECODE = LPS.LOANTYPECODE) LOANTYPE, (SELECT LPT.DESCRIPTION FROM T_loanpurposetype lpt WHERE lpt.loanpurposecode = la.loanpurposecode) LOANPURPOSE,(CASE WHEN LPS.AMORTIZATIONTYPECODE = '01' THEN 'ARM' WHEN LPS.AMORTIZATIONTYPECODE = '05' THEN 'Fixed' END) AMORTIZATIONTYPE,(CASE WHEN alo.channel IS NULL THEN 'RETAIL' WHEN alo.channel = 'HLD' THEN 'CD' END) Channel, ALO.HLDCUSTOMERTYPE, (SELECT oe4.NAME FROM T_orgentity oe4 WHERE oe4.orgentityid = alo.origbranchid ) BRANCH,  par.pricevalue,LP.BRANCHDISCRETION,lps.DOCTYPE from T_LOANAPPLICATION la, T_ADDITIONALLOANINFO alo,  T_ADDITIONALLOANINFO2 alo2, T_LOANPRODUCTSUMMARY lps, T_TRANSACTION tr, T_PROPERTY pt, T_RESIDENCETYPE rt,T_ADDR ad, T_FNMAPROPERTYTYPE fnma, T_LOANPRODUCT lp left outer join T_PRODUCTAPPLIEDRULE par on par.loanproductid = lp.loanproductid and par.pricingtypecode = 'LMI' where la.filoanid not like '199%' and ALO.PLANTYPE = 'Loan' and LA.APPLICATIONRECEIVEDDATE >= TO_DATE('2016/01/01 12:00:00 am','yyyy/mm/dd hh:mi:ss am') and LPS.BASERATEDATE between to_timestamp(Concat(TO_CHAR(sysdate-1,'MM/DD/YYYY'),' 02:00:00 am'),'MM/DD/YYYY HH:MI:SS pm') and to_timestamp(Concat(TO_CHAR(sysdate,'MM/DD/YYYY'),' 12:00:00 pm'),'MM/DD/YYYY HH:MI:SS pm') and ( (LPS.MARKETTYPE in ('559') ) or ( LPS.MARKETTYPE in ('110') and LPS.LOANTYPECODE = '03')) and Pt.RESIDENCETYPECODE = RT.RESIDENCETYPECODE and LA.TRANSACTIONID = TR.TRANSACTIONID and TR.PROPERTYID = PT.PROPERTYID and PT.ADDRID = AD.ADDRID and PT.SUBJECTPROPERTYTYPECODE = FNMA.SUBJECTPROPERTYTYPECODE AND LA.LOANAPPLICATIONID = LPS.LOANAPPLICATIONID and ALO.LOANINFOID = LA.LOANINFOID and ALO2.LOANINFO2ID = LA.LOANINFO2ID AND LA.LOANAPPLICATIONID = LP.LOANAPPLICATIONID AND lp.loanproductid = (SELECT MAX (lp2.loanproductid) FROM t_loanproduct lp2 WHERE lp2.loanapplicationid = la.loanapplicationid  AND LP2.ACTIONTAKEN in ('LOCKED', 'RELOCKED') ) ORDER BY LA.FILOANID, LP.ACTIONDATE
app.monday.query=select  cast (la.filoanid as integer) as LOAN_NUM,LA.WORKFLOWSTATECODE workflow,TO_CHAR(LA.CREATEDATE,'MM/dd/yyyy HH24:MI:SS') RFP_dt, TO_CHAR(LA.APPLICATIONRECEIVEDDATE,'MM/dd/yyyy HH24:MI:SS') app_dt, cast (LPS.MARKETTYPE as integer) as MARKETTYPE, ALO2.CPIKEY, TO_CHAR(LPS.BASERATEDATE,'MM/dd/yyyy HH24:MI:SS') BASERATEDATE, LP.ACTIONTAKEN, TO_CHAR(LP.ACTIONDATE,'MM/dd/yyyy HH24:MI:SS') ACTIONDATE, TO_CHAR(LP.LOCKDATE,'MM/dd/yyyy HH24:MI:SS') LOCKDATE, LA.LOANAMOUNT, LPS.LOANTERM, LP.LTV, LP.CLTV, LP.ACLTV, LA.FICOSCORE, LPS.RATE, LPS.POINTS, LPS.LOCKPERIODDAYS, LPS.LOCKSTATUS, LP.AGENCY, LPS.PROGRAMDESC, FNMA.DESCRIPTION Prop_type,  rt.description OCCUPANCY, AD.STATECODE,(SELECT LT.DESCRIPTION FROM T_loantype lt WHERE LT.LOANTYPECODE = LPS.LOANTYPECODE) LOANTYPE, (SELECT LPT.DESCRIPTION FROM T_loanpurposetype lpt WHERE lpt.loanpurposecode = la.loanpurposecode) LOANPURPOSE,(CASE WHEN LPS.AMORTIZATIONTYPECODE = '01' THEN 'ARM' WHEN LPS.AMORTIZATIONTYPECODE = '05' THEN 'Fixed' END) AMORTIZATIONTYPE,(CASE WHEN alo.channel IS NULL THEN 'RETAIL' WHEN alo.channel = 'HLD' THEN 'CD' END) Channel, ALO.HLDCUSTOMERTYPE, (SELECT oe4.NAME FROM T_orgentity oe4 WHERE oe4.orgentityid = alo.origbranchid ) BRANCH,  par.pricevalue,LP.BRANCHDISCRETION,lps.DOCTYPE from T_LOANAPPLICATION la, T_ADDITIONALLOANINFO alo,  T_ADDITIONALLOANINFO2 alo2, T_LOANPRODUCTSUMMARY lps, T_TRANSACTION tr, T_PROPERTY pt, T_RESIDENCETYPE rt,T_ADDR ad, T_FNMAPROPERTYTYPE fnma, T_LOANPRODUCT lp left outer join T_PRODUCTAPPLIEDRULE par on par.loanproductid = lp.loanproductid and par.pricingtypecode = 'LMI' where la.filoanid not like '199%' and ALO.PLANTYPE = 'Loan' and LA.APPLICATIONRECEIVEDDATE >= TO_DATE('2016/01/01 12:00:00 am','yyyy/mm/dd hh:mi:ss am') and LPS.BASERATEDATE between to_timestamp(Concat(TO_CHAR(sysdate-3,'MM/DD/YYYY'),' 02:00:00 am'),'MM/DD/YYYY HH:MI:SS pm') and to_timestamp(Concat(TO_CHAR(sysdate,'MM/DD/YYYY'),' 12:00:00 pm'),'MM/DD/YYYY HH:MI:SS pm') and ( (LPS.MARKETTYPE in ('559') ) or ( LPS.MARKETTYPE in ('110') and LPS.LOANTYPECODE = '03')) and Pt.RESIDENCETYPECODE = RT.RESIDENCETYPECODE and LA.TRANSACTIONID = TR.TRANSACTIONID and TR.PROPERTYID = PT.PROPERTYID and PT.ADDRID = AD.ADDRID and PT.SUBJECTPROPERTYTYPECODE = FNMA.SUBJECTPROPERTYTYPECODE AND LA.LOANAPPLICATIONID = LPS.LOANAPPLICATIONID and ALO.LOANINFOID = LA.LOANINFOID and ALO2.LOANINFO2ID = LA.LOANINFO2ID AND LA.LOANAPPLICATIONID = LP.LOANAPPLICATIONID AND lp.loanproductid = (SELECT MAX (lp2.loanproductid) FROM t_loanproduct lp2 WHERE lp2.loanapplicationid = la.loanapplicationid  AND LP2.ACTIONTAKEN in ('LOCKED', 'RELOCKED') ) ORDER BY LA.FILOANID, LP.ACTIONDATE

